body {
	// Color variables
	$color-bg-gradient: #202123;
	$color-bg-light: rgba(255, 255, 255, 0.05);
	$color-bg-light-hover: rgba(255, 255, 255, 0.08);
	$color-bg-toggle: rgba(255, 255, 255, 0.1);
	$color-bg-toggle-checked: #f47c00;
	$color-bg-select-option: #2d2d2d;
	$color-bg-save-btn: #f47c00;
	$color-bg-save-btn-hover: rgba(234, 192, 102, 0.4);
	$color-bg-save-btn-focus: rgba(234, 201, 102, 0.3);

	$color-white: #ffffff;
	$color-gray: gray;
	$color-gray-light: #e0e0e0;
	$color-gray-h2: #a0a0a0;
	$color-success: #4ade80;
	$color-error: #f87171;

	$color-border-light: rgba(255, 255, 255, 0.1);
	$color-border-toggle: rgba(255, 255, 255, 0.2);
	$color-border-select: rgba(255, 255, 255, 0.2);
	$color-border-select-hover: rgba(255, 255, 255, 0.4);
	$color-border-toggle-checked: #f47c00;
	$color-border-save-btn: none;

	$color-shadow-container: 0 20px 40px rgba(0, 0, 0, 0.3);
	$color-shadow-toggle: 0 2px 4px rgba(0, 0, 0, 0.2);
	$color-shadow-save-btn: 0 4px 12px rgba(234, 172, 102, 0.3);
	$color-shadow-save-btn-hover: 0 6px 16px rgba(234, 192, 102, 0.4);
	$color-shadow-select-focus: 0 0 0 3px rgba(102, 126, 234, 0.2);

	&.options {
		margin: 0;
		padding: 0;
		background: #202020;
		color: $color-white;
		font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
			"Helvetica Neue", Arial, sans-serif;
		min-width: 40rem;
		min-height: fit-content;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow-y: hidden;

		.options-container {
			border: 1px solid $color-border-light;
			width: 100%;
			max-width: 700px;
			box-shadow: $color-shadow-container;
			padding: 1rem;

			h1 {
				font-size: 1.5rem;
				font-weight: 600;
				text-align: center;
				color: $color-white;
				margin-bottom: 2rem;
			}

			h2 {
				font-size: 0.9rem;
				font-weight: 500;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				color: $color-gray-h2;
				margin-bottom: 1rem;
			}
		}

		// Master Toggle Card
		.master-toggle-section {
			margin-bottom: 2rem;
		}

		.master-toggle-card {
			display: flex;
			align-items: center;
			gap: 1rem;
			padding: 1.25rem;
			background: rgba(255, 255, 255, 0.05);
			border: 2px solid $color-border-light;
			border-radius: 12px;
			cursor: pointer;
			transition: all 0.2s ease;
			position: relative;

			&:hover {
				background: rgba(255, 255, 255, 0.08);
				border-color: rgba(255, 255, 255, 0.2);
				transform: translateY(-1px);
			}

			input[type="checkbox"] {
				display: none;
			}

			&.active {
				background: rgba(244, 124, 0, 0.1);
				border-color: $color-bg-toggle-checked;
			}

			.card-icon {
				width: 32px;
				height: 32px;
				color: $color-gray-h2;
				flex-shrink: 0;
			}

			&.active .card-icon {
				color: $color-bg-toggle-checked;
			}

			.card-content {
				h3 {
					margin: 0 0 0.25rem 0;
					font-size: 1.1rem;
					font-weight: 600;
					color: $color-white;
				}

				p {
					margin: 0;
					font-size: 0.85rem;
					color: $color-gray-h2;
				}
			}

			.card-status {
				position: absolute;
				right: 1.25rem;
				width: 12px;
				height: 12px;
				border-radius: 50%;
				background: rgba(255, 255, 255, 0.2);
				transition: all 0.2s ease;
			}

			&.active .card-status {
				background: $color-bg-toggle-checked;
				box-shadow: 0 0 8px rgba(244, 124, 0, 0.4);
			}
		}

		// Search Configuration
		.search-config-section {
			margin-bottom: 2rem;
			padding: 1rem;
			background: rgba(255, 255, 255, 0.02);
			border-radius: 8px;
			border: 1px solid rgba(255, 255, 255, 0.05);
		}

		.search-mode-selector {
			display: flex;
			align-items: center;
			gap: 1rem;

			label {
				color: $color-gray-light;
				font-size: 0.9rem;
				white-space: nowrap;
			}
		}

		// Feature Grid
		.features-section {
			margin-bottom: 2rem;
		}

		.feature-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
			gap: 1rem;
		}

		.feature-card {
			display: flex;
			flex-direction: column;
			align-items: center;
			text-align: center;
			padding: .75rem .5rem;
			background: rgba(255, 255, 255, 0.03);
			border: 1px solid rgba(255, 255, 255, 0.08);
			border-radius: 10px;
			cursor: pointer;
			transition: all 0.2s ease;
			position: relative;

			&:hover {
				background: rgba(255, 255, 255, 0.06);
				border-color: rgba(255, 255, 255, 0.15);
				transform: translateY(-2px);
			}

			input[type="checkbox"] {
				display: none;
			}

			&.active {
				background: rgba(244, 124, 0, 0.08);
				border-color: rgba(244, 124, 0, 0.3);
			}

			.card-icon {
				width: 24px;
				height: 24px;
				color: $color-gray-h2;
				margin-bottom: 0.75rem;
				flex-shrink: 0;
			}

			&.active .card-icon {
				color: $color-bg-toggle-checked;
			}

			.card-content {
				h3 {
					margin: 0 0 0.25rem 0;
					font-size: 0.9rem;
					font-weight: 600;
					color: $color-white;
				}

				p {
					margin: 0;
					font-size: 0.75rem;
					color: $color-gray-h2;
					line-height: 1.3;
				}
			}

			.card-status {
				position: absolute;
				top: 0.75rem;
				right: 0.75rem;
				width: 8px;
				height: 8px;
				border-radius: 50%;
				background: rgba(255, 255, 255, 0.2);
				transition: all 0.2s ease;
			}

			&.active .card-status {
				background: $color-bg-toggle-checked;
				box-shadow: 0 0 6px rgba(244, 124, 0, 0.4);
			}

			&.disabled {
				position: relative;
				filter: saturate(0);
				background: rgba(255, 255, 255, 0.03);
				border: 1px solid rgba(255, 255, 255, 0.08);
				pointer-events: none;

				&::after {
					content: "Not supported in this Contao Version";
					display: block;
					position: absolute;
					inset: 0;
					text-align: center;
					background-color: rgba(30, 30, 30, 0.95);
					backdrop-filter: blur(100px);
					border-radius: inherit;
					font-size: 150%;
					z-index: 1;
					display: flex;
					align-items: center;
					justify-content: center;
				}
			}
		}

		.select-wrapper {
			position: relative;
			flex: 1;

			select {
				width: 100%;
				padding: 0.75rem 1rem;
				background: $color-bg-light;
				border: 1px solid $color-border-select;
				border-radius: 8px;
				color: $color-white;
				font-size: 0.9rem;
				cursor: pointer;
				transition: all 0.2s ease;
				appearance: none;
				background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
				background-position: right 0.75rem center;
				background-repeat: no-repeat;
				background-size: 1rem;
				padding-right: 2.5rem;

				&:hover {
					border-color: $color-border-select-hover;
					background-color: $color-bg-light-hover;
				}

				&:focus {
					outline: none;
					border-color: #eaaf66;
				}

				option {
					background: $color-bg-select-option;
					color: $color-white;
				}
			}
		}

		.save-button {
			width: 100%;
			padding: 0.875rem 1.5rem;
			background: $color-bg-save-btn;
			border: $color-border-save-btn;
			border-radius: 8px;
			color: $color-white;
			font-size: 0.9rem;
			font-weight: 500;
			cursor: pointer;
			transition: all 0.2s ease;

			&:hover {
				transform: translateY(-1px);
			}

			&:active {
				transform: translateY(0);
			}

			&:focus {
				outline: none;
				box-shadow: 0 0 0 3px $color-bg-save-btn-focus;
			}
		}

		.status-message {
			min-height: 1.2rem;
			font-size: 0.8rem;
			text-align: center;
			margin-bottom: 1rem;
			opacity: 0;
			transition: opacity 0.3s ease;

			&.show {
				opacity: 1;
			}

			&.success {
				color: $color-success;
			}

			&.error {
				color: $color-error;
			}

		}

		.info {
			padding-top: unset;

			p, a {
				color: $color-gray;
				text-align: center;
			}

			a {
				text-decoration: underline;
				&:hover, &:focus {
					color: $color-white;
				}
			}
		}

		// Custom Tooltips
		.tooltip {
			position: fixed;
			background: rgba(0, 0, 0, 0.9);
			color: $color-white;
			padding: 0.75rem 1rem;
			border-radius: 6px;
			font-size: 0.8rem;
			line-height: 1.4;
			max-width: 250px;
			z-index: 1000;
			pointer-events: none;
			opacity: 0;
			transform: translateY(10px);
			transition: opacity 0.2s ease, transform 0.2s ease, left 0.3s ease, top 0.3s ease;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			border: 1px solid rgba(255, 255, 255, 0.1);

			&.show {
				opacity: 1;
				transform: translateY(0);
			}

			// Tooltip arrow
			&::before {
				content: '';
				position: absolute;
				top: -5px;
				left: 50%;
				transform: translateX(-50%);
				width: 0;
				height: 0;
				border-left: 5px solid transparent;
				border-right: 5px solid transparent;
				border-bottom: 5px solid rgba(0, 0, 0, 0.9);
			}

			// Position variants
			&.tooltip-bottom {
				&::before {
					top: -5px;
					border-top: none;
					border-bottom: 5px solid rgba(0, 0, 0, 0.9);
				}
			}

			&.tooltip-top {
				&::before {
					top: auto;
					bottom: -5px;
					border-bottom: none;
					border-top: 5px solid rgba(0, 0, 0, 0.9);
				}
			}
		}

		// Responsive layout for options
		@media (max-width: 600px) {
			.options-container {
				max-width: 400px;
				padding: 1rem;
			}

			.feature-grid {
				grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
				gap: 0.75rem;
			}

			.feature-card {
				padding: 1rem 0.75rem;
			}

			.search-mode-selector {
				flex-direction: column;
				align-items: stretch;
				gap: 0.5rem;
			}

			.master-toggle-card {
				padding: 1rem;

				.card-icon {
					width: 28px;
					height: 28px;
				}
			}

			// Smaller tooltips on mobile
			.tooltip {
				max-width: 200px;
				font-size: 0.75rem;
				padding: 0.5rem 0.75rem;
			}
		}

		@media (max-width: 400px) {
			.feature-grid {
				grid-template-columns: repeat(2, 1fr);
			}

			.tooltip {
				max-width: 180px;
				font-size: 0.7rem;
			}
		}
	}

	&.be_main {

		.context-menu {
			position: absolute;
			z-index: 1000;
			background-color: var(--form-bg, #fff);
			border: 1px solid var(--form-border, #aaa);
			visibility: hidden;
			display: flex;
			flex-direction: column;
			box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.1);
			min-width: fit-content;
			border-radius: .5rem;
			overflow: clip;
			opacity: 0;
			transition: opacity .2s, visibility .2s, transform .3s;

			&.open {
				visibility: visible;
				opacity: 1;
			}

			a {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				padding-block: 0.75rem;
				padding-inline: .5rem;
				text-wrap: nowrap;

				&:not(:last-child) {
					border-bottom: 1px solid var(--form-border, #aaa);
				}

				&:hover {
					background-color: var(--hover-row, #fffce1);
				}
			}

			@starting-style {
				opacity: 0;
				visibility: hidden;
			}
		}

		.tl_id {
			opacity: 0.5;
			padding-left: .5rem;
			display: inline-block;
			text-wrap: nowrap;
		}

		.tl_checkbox_container {
			display: flex;
			flex-wrap: wrap;
			gap: .25rem;
			align-items: start;
			justify-content: start;
			margin-bottom: .25rem;

			legend {
				display: inline-block;
				flex-basis: 100%;
				margin-bottom: .25rem;
			}

			br {
				display: none;
			}

			input {
				flex-basis: 13px;
			}

			label {
				flex-basis: calc(100% - 20px);
			}
		}

		.search-bar {
			p {
				margin-bottom: unset;
			}
			margin-bottom: .5rem;
		}

		.search-highlight {
			display: inline-block;

			&:is(label) {
				width: calc(100% - 18px);
			}

			background-color: var(--hover-row, rgba(255, 172, 94, 0.5));
		}

		.search-fade {
			opacity: 0.5;
		}

		.search-hidden {
			display: none;
		}

		.tiny-info {
			display: flex;
			gap: .5rem;
			align-items: center;
			justify-content: center;
			font-size: .75rem;
			color: white;

			span {
				opacity: 0.5;
			}
		}

		.tiny_btn {
			padding: 6px 8px !important;
			border: 1px solid var(--form-border) !important;
			background-color: #343d48 !important;
			border-radius: 2px !important;
			transition: background .2s;
			cursor: pointer;

			&:hover, &:focus {
				background-color: #4a5562 !important;
			}
		}

		#tmenu__profile {
			z-index: 99999999999999 !important;
		}

		.notification-wrapper {
			position: fixed;
			inset: 0;
			pointer-events: none;
			z-index: 99999999999999;

			.notification {
				position: absolute;
				bottom: 1rem;
				right: 1rem;
				background-color: var(--content-bg);
				border: 1px solid var(--contao);
				border-radius: .5rem;
				padding: 1rem;
				box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);
				color: var(--content-text);
				opacity: 0;

				&.slide-in {
					animation: slide-in-not .5s ease-out forwards;
				}

				&.slide-out {
					animation: slide-out-not .5s ease-out forwards;
				}

				&::before {
					content: 'i';
					position: absolute;
					width: 2rem;
					height: 2rem;
					background-color: var(--contao);
					border-radius: 50%;
					top: 50%;
					left: -1.5rem;
					color: var(--content-text);
					transform: translateY(-50%);
					font-weight: bold;
					font-size: 1.25rem;
					display: flex;
					justify-content: center;
					align-items: center;
				}
			}
		}
	}
}

@keyframes slide-in-not {
	0% {
		transform: translateY(100px);
		opacity: 0;
	}
	100% {
		transform: translateY(0);
		opacity: 1;
	}
}

@keyframes slide-out-not {
	0% {
		transform: translateY(0);
		opacity: 1;
	}
	100% {
		transform: translateY(100px);
		opacity: 0;
	}
}
